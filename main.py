import streamlit as st
import io
st.title('고등학생을 위한 진로탐색 앱')

# MBTI별 추천 직업 및 관련 학과
mbti_data = {
    "INTJ": {
        "jobs": [
            ("데이터 과학자", "통계학, 컴퓨터공학"),
            ("전략 컨설턴트", "경영학, 경제학"),
            ("시스템 설계자", "소프트웨어공학, 산업공학")
        ],
        "famous": "일론 머스크 (추정)"
    },
    "INTP": {
        "jobs": [
            ("AI 개발자", "컴퓨터공학, 전산학"),
            ("연구 과학자", "물리학, 생명과학"),
            ("기술 분석가", "정보시스템, 산업공학")
        ],
        "famous": "빌 게이츠 (추정)"
    },
    "ENTJ": {
        "jobs": [
            ("기업 CEO", "경영학, 경제학"),
            ("프로젝트 매니저", "산업공학, 경영학"),
            ("변호사", "법학, 정치외교학")
        ],
        "famous": "스티브 잡스 (추정)"
    },
    "ENTP": {
        "jobs": [
            ("스타트업 창업가", "경영학, 창업학"),
            ("광고 기획자", "광고홍보학, 미디어학"),
            ("기술 컨설턴트", "공학계열, 산업디자인")
        ],
        "famous": "토마스 에디슨 (추정)"
    },
    "INFJ": {
        "jobs": [
            ("상담심리사", "심리학, 사회복지학"),
            ("교사", "교육학, 국어교육과 등"),
            ("작가", "국문학, 문예창작과")
        ],
        "famous": "마틴 루터 킹 주니어 (추정)"
    },
    "INFP": {
        "jobs": [
            ("일러스트레이터", "디자인학, 회화과"),
            ("시인/소설가", "문예창작과, 국문학"),
            ("사회운동가", "사회학, 정치외교학")
        ],
        "famous": "윌리엄 셰익스피어 (추정)"
    },
    "ENFJ": {
        "jobs": [
            ("홍보 전문가", "광고홍보학, 커뮤니케이션학"),
            ("교육자", "교육학, 심리학"),
            ("비영리단체 활동가", "사회복지학, 국제학")
        ],
        "famous": "버락 오바마 (추정)"
    },
    "ENFP": {
        "jobs": [
            ("콘텐츠 크리에이터", "미디어학, 영상학"),
            ("심리상담사", "심리학, 아동가족학"),
            ("광고 기획자", "광고홍보학, 디자인학")
        ],
        "famous": "로버트 다우니 주니어 (추정)"
    },
    "ISTJ": {
        "jobs": [
            ("공무원", "행정학, 정치외교학"),
            ("회계사", "경영학, 회계학"),
            ("경찰관", "경찰행정학, 법학")
        ],
        "famous": "나탈리 포트만 (추정)"
    },
    "ISFJ": {
        "jobs": [
            ("간호사", "간호학과"),
            ("초등학교 교사", "초등교육과"),
            ("행정사무원", "행정학, 문헌정보학")
        ],
        "famous": "비욘세 (추정)"
    },
    "ESTJ": {
        "jobs": [
            ("군인", "군사학, 국방학"),
            ("은행원", "경제학, 경영학"),
            ("기업 관리자", "경영학, 산업공학")
        ],
        "famous": "미셸 오바마 (추정)"
    },
    "ESFJ": {
        "jobs": [
            ("병원 코디네이터", "보건행정학, 간호학"),
            ("영양사", "식품영양학"),
            ("유치원 교사", "유아교육과")
        ],
        "famous": "테일러 스위프트 (추정)"
    },
    "ISTP": {
        "jobs": [
            ("기계 엔지니어", "기계공학"),
            ("경호원", "경호보안학"),
            ("정비사", "자동차공학, 기계설비과")
        ],
        "famous": "클린트 이스트우드 (추정)"
    },
    "ISFP": {
        "jobs": [
            ("패션디자이너", "패션디자인학"),
            ("사진작가", "사진영상학"),
            ("보석디자이너", "귀금속디자인과")
        ],
        "famous": "마이클 잭슨 (추정)"
    },
    "ESTP": {
        "jobs": [
            ("세일즈 매니저", "경영학, 마케팅학"),
            ("응급구조사", "응급구조학과"),
            ("이벤트 플래너", "호텔경영학, 관광학")
        ],
        "famous": "어니스트 헤밍웨이 (추정)"
    },
    "ESFP": {
        "jobs": [
            ("MC/방송인", "방송연예과"),
            ("배우", "연극영화과"),
            ("관광가이드", "관광경영학")
        ],
        "famous": "마일리 사이러스 (추정)"
    }
}

# Streamlit UI
st.title("🎯 MBTI 기반 진로 추천 앱")

# MBTI 선택
mbti_type = st.selectbox("당신의 MBTI 유형을 선택하세요:", sorted(mbti_data.keys()))

if mbti_type:
    st.subheader(f"✅ {mbti_type} 유형에게 추천하는 직업과 관련 학과")
    recommendations = mbti_data[mbti_type]["jobs"]
    famous = mbti_data[mbti_type]["famous"]

    output_text = f"[MBTI 유형: {mbti_type}]\n\n추천 직업 및 관련 학과:\n"

    for i, (job, major) in enumerate(recommendations, 1):
        st.markdown(f"**{i}. {job}** — _관련 학과: {major}_")
        output_text += f"{i}. {job} (관련 학과: {major})\n"

    st.markdown("---")
    st.markdown(f"🎓 **유명한 {mbti_type} 유형 인물:** {famous}")
    output_text += f"\n유명한 {mbti_type} 유형 인물: {famous}\n"

    # 텍스트 파일로 저장
    txt_file = io.StringIO(output_text)
    st.download_button(
        label="📥 추천 결과 TXT 파일 다운로드",
        data=txt_file.getvalue(),
        file_name=f"{mbti_type}_진로추천.txt",
        mime="text/plain"
    )
